{% extends 'base.html' %}
{% block title %}Мои банки{% endblock %}
{% block content %}

<h1 class="page-title">Мои банки</h1>

{% if banks %}
     {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
    {% endif %}
  <div class="bank-grid">
    {% for bank in banks %}
      <div class="bank-card">
        <h2 class="bank-card-title">{{ bank.get_bank_name_display }}</h2>
        <div class="bank-details">
          <div class="bank-detail-row"><span class="label">Team:</span> <span class="value">{{ bank.team }}</span></div>
          <div class="bank-detail-row"><span class="label">Логин:</span> <span class="value">{{ bank.team_login }}</span></div>
          <div class="bank-detail-row"><span class="label">Работает:</span> <span class="value">{{ bank.bank_token_status }}</span></div>
          <div class="bank-detail-row"><span class="label">Согласие:</span> <span class="value">{{ bank.account_consents_status }}</span></div>
          <div class="bank-detail-row"><span class="label">Создано:</span> <span class="value">{{ bank.created_at|date:"d.m.Y H:i" }}</span></div>
          <div class="bank-detail-row"><span class="label">Обновлено:</span> <span class="value">{{ bank.updated_at|date:"d.m.Y H:i" }}</span></div>
        </div>
        <div class="bank-card-actions">
          <a href="{% url 'bank_update' bank.pk %}" class="btn ghost">Редактировать</a>
          <a href="{% url 'bank_delete' bank.pk %}" class="btn ghost">Удалить</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="empty-state">
    <p class="empty-text">Нажмите кнопку "Добавить банк", чтобы начать работу с API банков</p>
  </div>
{% endif %}

<div class="page-actions">
  <a href="{% url 'bank_create' %}" class="btn primary">Добавить банк</a>
</div>

{% endblock %}
