{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<h1 class="page-title">Личный кабинет</h1>

<div class="card" style="margin-bottom: 1rem;">
  <div class="card-head">
    <h2 class="card-title">Привет, {{ request.user.username }}!</h2>
  </div>
  <div class="stack">
    <p class="muted">Рады видеть вас снова. Вот краткая сводка по курсам валют.</p>
  </div>
</div>

  {% if banks %}
    <div class="card bank-status-card" style="margin-bottom: 1rem;">
      <div class="card-head">
        <h2 class="card-title">Статус банков</h2>
      </div>
      <div class="bank-status-grid">
        {% for bank in banks|slice:":3" %}
        <div class="bank-status-item">
          <span class="bank-name">{{ bank.bank_name }}</span>
          <span class="bank-status">
            {{ bank.get_account_consents_status_display }}
            <span class="status-indicator {% if bank.account_consents_status == 'ACTIVE' %}status-active{% elif bank.account_consents_status == 'PENDING' %}status-pending{% else %}status-none{% endif %}"></span>
          </span>
        </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}

<div class="grid">
  <article class="card">
    <header class="card-head">
      <h2 class="card-title">Курсы валют</h2>
      <span class="badge info">Обновлено сейчас</span>
    </header>
    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th>Валюта</th>
            <th>Курс (RUB)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>USD</td>
            <td>1 USD = {{ price_now.USD }} RUB</td>
          </tr>
          <tr>
            <td>EUR</td>
            <td>1 EUR = {{ price_now.EUR }} RUB</td>
          </tr>
          <tr>
            <td>GBP</td>
            <td>1 GBP = {{ price_now.GBP }} RUB</td>
          </tr>
          <tr>
            <td>BTC</td>
            <td class="muted">данные недоступны</td>
          </tr>
          <tr>
            <td>ETH</td>
            <td class="muted">данные недоступны</td>
          </tr>
          <tr>
            <td>BNB</td>
            <td class="muted">данные недоступны</td>
          </tr>
        </tbody>
      </table>
    </div>



    <footer class="card-foot">
      <a class="btn primary" href="/rates">Все курсы</a>
      <a class="btn ghost" href="/settings">Настройки</a>
    </footer>
  </article>
</div>


{% endblock %}
